import{D as f}from"./DefaultLayout-CN23wems.js";import{_ as p,c as r,a as e,F as g,k as x,t as o,e as m,d as h,b as _,v,o as l,n as S}from"./index-DqRxsvjU.js";const C={components:{DefaultLayout:f},data(){return{tabs:["Dashboard","Users","Carts","Orders"],activeTab:"Dashboard",users:{},userCarts:{},userSearch:""}},computed:{filteredUsers(){return this.userSearch?Object.fromEntries(Object.entries(this.users).filter(([s])=>s.toLowerCase().includes(this.userSearch.toLowerCase()))):this.users},totalCartValue(){return Object.values(this.userCarts).flat().reduce((s,t)=>s+t.price*t.quantity,0).toFixed(2)},allOrders(){return JSON.parse(localStorage.getItem("orders")||"{}")}},created(){this.loadData()},currentUser(){const s=localStorage.getItem("currentUser");return s?JSON.parse(s).username:""},methods:{loadData(){this.users=JSON.parse(localStorage.getItem("users")||"{}"),this.userCarts=JSON.parse(localStorage.getItem("userCarts")||"{}")},deleteUser(s){if(confirm(`Delete user "${s}"?`)){const t=JSON.parse(localStorage.getItem("users")||"{}");delete t[s],localStorage.setItem("users",JSON.stringify(t)),delete this.users[s]}},clearCart(s){if(confirm(`Clear cart for "${s}"?`)){const t=JSON.parse(localStorage.getItem("userCarts")||"{}");delete t[s],localStorage.setItem("userCarts",JSON.stringify(t)),delete this.userCarts[s]}},loginAsUser(s){if(JSON.parse(localStorage.getItem("users")||"{}")[s]){const y=JSON.parse(localStorage.getItem("currentUser")||"{}");y.username==="admin"&&localStorage.setItem("adminSession",JSON.stringify(y)),localStorage.setItem("currentUser",JSON.stringify({username:s})),alert(`You are logged in as "${s}"`),this.$router.push("/home")}else alert("User not found")},formatDate(s){return new Date(s).toLocaleString()}}},k={class:"min-h-screen flex"},w={class:"w-60 bg-white shadow-md p-4 flex flex-col gap-4"},O={class:"flex flex-col gap-2"},U=["onClick"],N={class:"flex-1 p-8 bg-gray-50 overflow-y-auto"},D={class:"text-3xl font-semibold mb-6 text-gray-800"},T={key:0,class:"space-y-4"},I={class:"bg-white p-6 rounded-xl shadow"},J={class:"space-y-2 text-gray-700"},j={key:1,class:"space-y-4"},V={class:"bg-white p-6 rounded-xl shadow-lg"},A={class:"space-y-2 text-gray-700 text-sm max-h-96 overflow-y-auto"},L={key:0,class:"text-green-600 text-xs ml-2"},q={class:"flex gap-2"},F=["onClick"],B=["onClick"],E={key:2,class:"space-y-4"},R={class:"bg-white p-6 rounded-xl shadow-lg"},Y={class:"space-y-4 max-h-[30rem] overflow-y-auto"},z={class:"flex justify-between items-center"},M={class:"text-blue-600 font-medium"},G=["onClick"],H={class:"ml-4 list-disc text-sm text-gray-600 space-y-1 mt-2"},K={class:"text-right mt-2 text-sm font-semibold text-gray-800"},P={key:3,class:"space-y-4"},Q={class:"bg-white p-6 rounded-xl shadow-lg"},W={class:"space-y-4 max-h-[30rem] overflow-y-auto"},X={class:"text-blue-600 font-medium mb-2"},Z={class:"text-sm mb-1"},$={class:"ml-4 list-disc text-sm text-gray-600"};function ee(s,t,b,y,n,u){return l(),r("div",k,[e("aside",w,[t[1]||(t[1]=e("h2",{class:"text-2xl font-bold text-blue-600 text-center"},"Admin",-1)),e("nav",O,[(l(!0),r(g,null,x(n.tabs,c=>(l(),r("button",{key:c,onClick:i=>n.activeTab=c,class:S(["text-left px-4 py-2 rounded-lg transition",n.activeTab===c?"bg-blue-600 text-white":"hover:bg-gray-100 text-gray-700"])},o(c),11,U))),128))])]),e("main",N,[e("h1",D,"🛠️ "+o(n.activeTab),1),n.activeTab==="Dashboard"?(l(),r("section",T,[e("div",I,[t[5]||(t[5]=e("h2",{class:"text-xl font-bold mb-2"},"📊 Summary",-1)),e("ul",J,[e("li",null,[t[2]||(t[2]=m("Total Registered Users: ")),e("strong",null,o(Object.keys(n.users).length),1)]),e("li",null,[t[3]||(t[3]=m("Active User Carts: ")),e("strong",null,o(Object.keys(n.userCarts).length),1)]),e("li",null,[t[4]||(t[4]=m("Total Cart Value: ")),e("strong",null,"$"+o(u.totalCartValue),1)])])])])):h("",!0),n.activeTab==="Users"?(l(),r("section",j,[_(e("input",{"onUpdate:modelValue":t[0]||(t[0]=c=>n.userSearch=c),type:"text",placeholder:"Search User",class:"border px-3 py-1 rounded mb-4 w-60"},null,512),[[v,n.userSearch]]),e("div",V,[t[6]||(t[6]=e("h2",{class:"text-xl font-semibold mb-4 text-gray-800"},"👤 Registered Users",-1)),e("ul",A,[(l(!0),r(g,null,x(u.filteredUsers,(c,i)=>(l(),r("li",{key:i,class:"flex justify-between items-center p-2 rounded hover:bg-gray-100 transition"},[e("span",null,[e("strong",null,o(i),1),s.currentUser===i?(l(),r("span",L,"(You)")):h("",!0)]),e("div",q,[e("button",{onClick:a=>u.loginAsUser(i),class:"text-blue-600 text-xs hover:underline"},"Login as",8,F),e("button",{onClick:a=>u.deleteUser(i),class:"text-red-600 text-xs hover:underline"},"Delete",8,B)])]))),128))])])])):h("",!0),n.activeTab==="Carts"?(l(),r("section",E,[e("div",R,[t[7]||(t[7]=e("h2",{class:"text-xl font-semibold mb-4 text-gray-800"},"🛒 User Carts",-1)),e("div",Y,[(l(!0),r(g,null,x(n.userCarts,(c,i)=>(l(),r("div",{key:i,class:"bg-gray-50 p-4 rounded-xl border"},[e("div",z,[e("h3",M,"🧑 "+o(i),1),e("button",{onClick:a=>u.clearCart(i),class:"text-red-600 text-xs hover:underline"},"Clear",8,G)]),e("ul",H,[(l(!0),r(g,null,x(c,a=>(l(),r("li",{key:a.id},o(a.title)+" - $"+o(a.price)+" × "+o(a.quantity),1))),128))]),e("div",K," Total: $"+o(c.reduce((a,d)=>a+d.price*d.quantity,0).toFixed(2)),1)]))),128))])])])):h("",!0),n.activeTab==="Orders"?(l(),r("section",P,[e("div",Q,[t[8]||(t[8]=e("h2",{class:"text-xl font-semibold mb-4 text-gray-800"},"🧾 All Orders",-1)),e("div",W,[(l(!0),r(g,null,x(u.allOrders,(c,i)=>(l(),r("div",{key:i,class:"border p-4 rounded"},[e("h3",X,"🧑 "+o(i),1),(l(!0),r(g,null,x(c,a=>(l(),r("div",{key:a.id,class:"bg-gray-50 p-3 rounded mb-2"},[e("p",Z,[m("🗓 "+o(u.formatDate(a.date))+" — Total: ",1),e("strong",null,"$"+o(a.total),1)]),e("ul",$,[(l(!0),r(g,null,x(a.items,d=>(l(),r("li",{key:d.id},o(d.title)+" × "+o(d.quantity)+" ($"+o(d.price)+") ",1))),128))])]))),128))]))),128))])])])):h("",!0)])])}const re=p(C,[["render",ee]]);export{re as default};
