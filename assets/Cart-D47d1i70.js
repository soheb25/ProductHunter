import{_ as p,i as x,u as g,h as y,g as b,r as f,o as d,a as t,c as i,F as v,k as C,b as c,m as _,t as n,v as w,d as m}from"./index-DqRxsvjU.js";import{D as k}from"./DefaultLayout-CN23wems.js";const S={components:{DefaultLayout:k},data(){return{discountCode:"",discountPercent:0,discountMessage:"",selectedItems:[]}},computed:{cart(){return x()},user(){return g()},items(){return this.cart.items},subtotal(){return this.items.reduce((r,e)=>r+e.price*e.quantity,0)},discountAmount(){return this.subtotal*(this.discountPercent/100)},total(){return this.subtotal-this.discountAmount}},methods:{applyDiscount(){const r=this.discountCode.trim().toLowerCase();r==="summer25"?(this.discountPercent=25,this.discountMessage="✅ 25% discount applied!"):r==="welcome10"?(this.discountPercent=10,this.discountMessage="✅ 10% welcome discount applied!"):(this.discountPercent=0,this.discountMessage="❌ Invalid discount code.")},handlePayment(){if(!this.user.currentUser){alert("You must be logged in to complete payment."),this.$router.push("/login");return}const r={id:Date.now(),items:this.items,total:this.total.toFixed(2),date:new Date().toISOString(),status:"Completed"},e=JSON.parse(localStorage.getItem("orders")||"{}"),u=e[this.user.currentUser.username]||[];u.push(r),e[this.user.currentUser.username]=u,localStorage.setItem("orders",JSON.stringify(e)),alert(`🎉 Payment of $${this.total.toFixed(2)} successful!`),this.cart.clearCart(),this.$router.push("/home")},clearSelected(){this.selectedItems.forEach(r=>this.cart.removeFromCart(r)),this.selectedItems=[]}}},D={class:"max-w-5xl mx-auto p-6"},P={key:0,class:"grid md:grid-cols-3 gap-6"},I={class:"md:col-span-2 space-y-4"},F={class:"flex items-center gap-3"},M=["value"],U={class:"font-semibold text-gray-800"},N={class:"text-sm text-gray-500"},A=["onClick"],B={class:"text-right mt-6 space-x-3"},O=["disabled"],V={class:"bg-white shadow p-6 rounded-xl space-y-4"},L={class:"space-y-2"},Y={key:0,class:"text-green-600 text-sm"},q={key:0,class:"text-green-700"},E={class:"font-bold text-lg"},J={key:1,class:"text-gray-500 mt-10 text-center"};function T(r,e,u,j,l,o){const h=f("default-layout");return d(),y(h,null,{default:b(()=>[t("div",D,[e[8]||(e[8]=t("h2",{class:"text-2xl font-bold mb-4"},"Your Cart",-1)),o.items.length?(d(),i("div",P,[t("div",I,[(d(!0),i(v,null,C(o.items,s=>(d(),i("div",{key:s.id,class:"bg-white shadow p-4 rounded-xl flex justify-between items-center"},[t("div",F,[c(t("input",{type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=a=>l.selectedItems=a),value:s.id},null,8,M),[[_,l.selectedItems]]),t("div",null,[t("h3",U,n(s.title),1),t("p",N,n(s.quantity)+" × $"+n(s.price),1)])]),t("button",{onClick:a=>o.cart.removeFromCart(s.id),class:"text-red-500 hover:underline"}," Remove ",8,A)]))),128)),t("div",B,[t("button",{onClick:e[1]||(e[1]=(...s)=>o.clearSelected&&o.clearSelected(...s)),class:"bg-yellow-500 text-white px-4 py-2 rounded-xl hover:bg-yellow-600",disabled:!l.selectedItems.length}," Clear ",8,O),t("button",{onClick:e[2]||(e[2]=(...s)=>o.cart.clearCart&&o.cart.clearCart(...s)),class:"bg-red-600 text-white px-4 py-2 rounded-xl hover:bg-red-700"}," Clear Cart ")])]),t("div",V,[e[6]||(e[6]=t("h3",{class:"text-lg font-semibold mb-2"},"🧾 Summary",-1)),t("p",null,"Subtotal: $"+n(o.subtotal.toFixed(2)),1),t("div",L,[c(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>l.discountCode=s),placeholder:"Discount code",class:"border w-full px-3 py-2 rounded text-sm"},null,512),[[w,l.discountCode]]),t("button",{onClick:e[4]||(e[4]=(...s)=>o.applyDiscount&&o.applyDiscount(...s)),class:"bg-blue-600 text-white w-full py-2 rounded hover:bg-blue-700"}," Apply Discount "),l.discountMessage?(d(),i("p",Y,n(l.discountMessage),1)):m("",!0)]),l.discountPercent>0?(d(),i("p",q," Discount ("+n(l.discountPercent)+"%): -$"+n(o.discountAmount.toFixed(2)),1)):m("",!0),e[7]||(e[7]=t("hr",null,null,-1)),t("p",E," Total: $"+n(o.total.toFixed(2)),1),t("button",{class:"w-full bg-green-600 text-white py-2 rounded hover:bg-green-700 mt-4",onClick:e[5]||(e[5]=(...s)=>o.handlePayment&&o.handlePayment(...s))}," Pay Now ")])])):(d(),i("div",J," Your cart is empty. "))])]),_:1})}const G=p(S,[["render",T]]);export{G as default};
